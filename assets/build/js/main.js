$(document).ready((function(){var e,t;function o(){var e=$(".bee_wrapper_movements");0!==e.length&&$.ajax({url:"ajax/bee_get_movements",type:"POST",dataType:"json",cache:!1,data:{hook:"bee_hook",action:"load"},beforeSend:function(){e.waitMe()}}).done((function(t){200===t.status?e.html(t.data):(toastr.error(t.msg,"¡Upss!"),e.html(""))})).fail((function(t){toastr.error("Hubo un error en la petición","¡Upss!"),e.html("")})).always((function(){e.waitMe("hide")}))}console.log("////////// Bienvenido a Bee Framework Versión "+Bee.bee_version+" //////////"),console.log("//////////////////// www.joystick.com.mx ////////////////////"),console.log(Bee),$("body").on("click",".confirmar",(function(e){e.preventDefault();let t=$(this).attr("href");return confirm("¿Estás seguro?")?(window.location=t,!0):(console.log("Acción cancelada."),!0)})),0!=$(".summernote").length&&$(".summernote").summernote({placeholder:"Escribe en este campo...",tabsize:2,height:300}),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)})),e=$("body"),t=Bee.csrf,0!=$("#test_ajax").length&&$.ajax({url:"ajax/test",type:"post",dataType:"json",data:{hook:"bee_hook",action:"post",csrf:t},beforeSend:function(){e.waitMe()}}).done((function(e){toastr.success(e.msg),console.log(e)})).fail((function(e){toastr.error("Prueba AJAX fallida.","¡Upss!")})).always((function(){e.waitMe("hide")})),$(".bee_add_movement").on("submit",(function(e){e.preventDefault();var t=$(".bee_add_movement"),a=new FormData(t.get(0)),n=$("#type").val(),r=$("#description").val(),s=$("#amount").val();if(a.append("hook","bee_hook"),a.append("action","add"),"none"===n)return void toastr.error("Selecciona un tipo de movimiento válido","¡Upss!");if(""===r||r.length<5)return void toastr.error("Ingresa una descripción válida","¡Upss!");if(""===s||s<=0)return void toastr.error("Ingresa un monto válido","¡Upss!");$.ajax({url:"ajax/bee_add_movement",type:"post",dataType:"json",contentType:!1,processData:!1,cache:!1,data:a,beforeSend:function(){t.waitMe()}}).done((function(e){201===e.status?(toastr.success(e.msg,"¡Bien!"),t.trigger("reset"),o()):toastr.error(e.msg,"¡Upss!")})).fail((function(e){toastr.error("Hubo un error en la petición","¡Upss!")})).always((function(){t.waitMe("hide")}))})),o(),$("body").on("dblclick",".bee_movement",(function(e){var t=$(this).data("id"),o=$(".bee_add_movement"),a=$(".bee_wrapper_update_form");$.ajax({url:"ajax/bee_update_movement",type:"POST",dataType:"json",cache:!1,data:{hook:"bee_hook",action:"get",id:t},beforeSend:function(){a.waitMe()}}).done((function(e){200===e.status?(a.html(e.data),o.hide()):toastr.error(e.msg,"¡Upss!")})).fail((function(e){toastr.error("Hubo un error en la petición","¡Upss!")})).always((function(){a.waitMe("hide")}))})),$("body").on("submit",".bee_save_movement",(function(e){e.preventDefault();var t=$(".bee_save_movement"),a=new FormData(t.get(0)),n=$('select[name="type"]',t).val(),r=$('input[name="description"]',t).val(),s=$('input[name="amount"]',t).val(),i=$(".bee_add_movement");if(a.append("hook","bee_hook"),a.append("action","update"),"none"===n)return void toastr.error("Selecciona un tipo de movimiento válido","¡Upss!");if(""===r||r.length<5)return void toastr.error("Ingresa una descripción válida","¡Upss!");if(""===s||s<=0)return void toastr.error("Ingresa un monto válido","¡Upss!");$.ajax({url:"ajax/bee_save_movement",type:"post",dataType:"json",contentType:!1,processData:!1,cache:!1,data:a,beforeSend:function(){t.waitMe()}}).done((function(e){200===e.status?(toastr.success(e.msg,"¡Bien!"),t.trigger("reset"),t.remove(),i.show(),o()):toastr.error(e.msg,"¡Upss!")})).fail((function(e){toastr.error("Hubo un error en la petición","¡Upss!")})).always((function(){t.waitMe("hide")}))})),$("body").on("click",".bee_delete_movement",(function(e){var t=$(this).data("id"),a=$(".bee_wrapper_movements");if(!confirm("¿Estás seguro?"))return!1;$.ajax({url:"ajax/bee_delete_movement",type:"POST",dataType:"json",cache:!1,data:{hook:"bee_hook",action:"delete",id:t},beforeSend:function(){a.waitMe()}}).done((function(e){200===e.status?(toastr.success(e.msg,"Bien!"),o()):toastr.error(e.msg,"¡Upss!")})).fail((function(e){toastr.error("Hubo un error en la petición","¡Upss!")})).always((function(){a.waitMe("hide")}))})),$(".bee_save_options").on("submit",(function(e){e.preventDefault();var t=$(".bee_save_options"),a=new FormData(t.get(0));a.append("hook","bee_hook"),a.append("action","add"),$.ajax({url:"ajax/bee_save_options",type:"post",dataType:"json",contentType:!1,processData:!1,cache:!1,data:a,beforeSend:function(){t.waitMe()}}).done((function(e){200===e.status||201===e.status?(toastr.success(e.msg,"¡Bien!"),o()):toastr.error(e.msg,"¡Upss!")})).fail((function(e){toastr.error("Hubo un error en la petición","¡Upss!")})).always((function(){t.waitMe("hide")}))}))}));